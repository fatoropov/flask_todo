{%extends "base.html"%} {%block content%}

<div class="content container">
  <h1>Количество задач: {{ count }}</h1>
  {% for todo in todos %} {% if todo[0].deadline != None %}
  <div class="row">
    <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 mb-md-3">
      {% if todo[1] < 0 %}
      <div class="card border-danger text-bg-ligth">
        {% elif todo[1] < 86400 %}
        <div class="card border-warning text-bg-ligth">
          {% else %}
          <div class="card border-info text-bg-ligth">
            {% endif%}
            <div class="card-body">
              <div class="row">
                <div class="col-6 col-sm-6 col-md-4 col-lg-6 col-xl-8">
                  <a
                    href="{{ url_for('todo_detail', id=todo[0].id) }}"
                    title="todo detail"
                    style="color: #252525; text-decoration: none"
                  >
                    <h4>{{ todo[0].title }}</h4>
                  </a>
                </div>
                <div class="col-4 col-sm-4 col-md-4 col-lg-3 col-xl-2">
                  Дедлайн: {{ moment(todo[0].deadline).format('LL') }}
                </div>
                <div class="col-2 col-sm-2 col-md-4 col-lg-3 col-xl-2">
                  <a
                    class="btn btn-success"
                    href="{{ url_for('todo_finished', id=todo[0].id) }}"
                    title="Mark todo as completed"
                  >
                    <i
                      class="bi bi-check"
                      style="font-size: 1.5rem"
                      href="{{ url_for('todo_finished', id=todo[0].id) }}"
                    >
                    </i>
                  </a>
                  <a
                    class="btn btn-secondary"
                    href="{{ url_for('edit_todo', id=todo[0].id) }}"
                    title="Edit todo"
                  >
                    <i
                      class="bi bi-pencil-square"
                      style="font-size: 1.5rem"
                      href="{{ url_for('edit_todo', id=todo[0].id) }}"
                    >
                    </i>
                  </a>
                  <a
                    class="btn btn-danger"
                    href="{{ url_for('delete_todo', id=todo[0].id) }}"
                    title="Delete todo"
                  >
                    <i
                      class="bi bi-x"
                      style="font-size: 1.5rem"
                      href="{{ url_for('delete_todo', id=todo[0].id) }}"
                    >
                    </i>
                  </a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      {% else %}
      <div class="card border-info text-bg-ligth">
        <div class="card-body">
          <div class="row">
            <div class="col-4 col-sm-4 col-md-4 col-lg-4 col-xl-4">
              <a
                class="btn"
                type="hidden"
                href="{{ url_for('todo_detail', id=todo[0].id) }}"
                title="todo detail"
                style="color: #252525"
              >
                <h4>{{ todo[0].title }}</h4>
              </a>
            </div>
            <div class="col-4 col-sm-4 col-md-4 col-lg-4 col-xl-4">
              <a
                class="btn btn-success"
                href="{{ url_for('todo_finished', id=todo[0].id) }}"
                title="Mark todo as completed"
              >
                <i
                  class="bi bi-check"
                  style="font-size: 1.5rem"
                  href="{{ url_for('todo_finished', id=todo[0].id) }}"
                >
                </i>
              </a>
              <a
                class="btn btn-secondary"
                href="{{ url_for('edit_todo', id=todo[0].id) }}"
                title="Edit todo"
              >
                <i
                  class="bi bi-pencil-square"
                  style="font-size: 1.5rem"
                  href="{{ url_for('edit_todo', id=todo[0].id) }}"
                >
                </i>
              </a>
              <a
                class="btn btn-danger"
                href="{{ url_for('delete_todo', id=todo[0].id) }}"
                title="Delete todo"
              >
                <i
                  class="bi bi-x"
                  style="font-size: 1.5rem"
                  href="{{ url_for('delete_todo', id=todo.id) }}"
                >
                </i>
              </a>
            </div>
          </div>
        </div>
      </div>
      {% endif %} {% endfor %}
    </div>
    {%endblock%}
  </div>
</div>
